
<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <% if @photos.present? %>
      <div class="carousel-item active">
        <%= cl_image_tag @photos.first.data, class: "d-block w-100", id: "desk_photo" %>
      </div>
      <% @photos.drop(1).each do |photo| %>
        <div class="carousel-item">
          <%= cl_image_tag photo.data, class: "d-block w-100", id: "desk_photo" %>
        </div>
      <% end %>
    <% else %>
      <div class="carousel-item active">
        <%= image_tag "https://res.cloudinary.com/dwourcbb9/image/upload/v1559054779/photo-1498050108023-c5249f4df085_laghas.jpg", class: "d-block w-100", id: "desk_photo" %>
      </div>
      <div class="carousel-item">
          <%= image_tag "https://res.cloudinary.com/dwourcbb9/image/upload/v1559061922/fbi4cvtf8rwpsi2ic4lb.jpg", class: "d-block w-100", id: "desk_photo" %>
        </div>
    <% end %>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
<div class="price-tag-wrap-show">
              <div class="price-tag">
                <div class="price-tag-content">
                  <h3><%= @desk.price %>€</h3>
                  <p>/Day</p>
                </div>
              </div>
            </div>
<div class="main-container">
  <div class="desk-content">
    <h1 class ="underline">
      <span>
        <%= @desk.title %>
      </span>
    </h1>
    <p><%= @desk.address %></p>
    <p id="desk-description"><%= @desk.description %></p>
    <div class="rating">
      <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
    </div>
  </div>
  <div class="desk-feature">
    <h3>Features</h3>
    <div class="row mt-3">
      <% @allfeatures.each do |d| %>
      <div class="col-4 mb-3">
        <% if d.desk_features.where(desk_id: @desk).empty? %>
          <%= image_tag "#{d.icon_name}-grey.png", class: "feature-icon" %>
          <p class="grey-feature"> <%= d.name %></p>
        <% else %>
          <%= image_tag "#{d.icon_name}.png", class: "feature-icon" %>
          <p><%= d.name %></p>
        <% end %>
        </div>
      <% end %>
      </div>
    </div>
  <div class="desk-host">
    <h3>Your host</h3>
    <div class="d-flex">
      <div class="host ml-2">
        <% if @desk.user.photo.present? %>
          <%= cl_image_tag @desk.user.photo, class: "avatar-large" %>
        <% else %>
          <%= image_tag "https://res.cloudinary.com/dwourcbb9/image/upload/v1559038920/blank-profile-picture-973460_1280_tey6qw.png", class: "avatar-large"%>
        <% end %>
        <p id="host-name"><%= @desk.user.first_name.capitalize%></p>
      </div>
    <p><%= @desk.user.description %></p>
  </div>
  </div>
  <% if @desk.reviews.any? %>
    <div class="reviews">
      <% @desk.reviews.each do |review| %>
        <div class="card-review">
          <%= review.desk_rating %>
          <%= review.content %>
          <div class="user-review">
            <% if review.user.photo.present? %>
              <%= cl_image_tag review.user.photo, class: "avatar-large mr-3" %>
            <% else %>
              <%= image_tag "https://res.cloudinary.com/dwourcbb9/image/upload/v1559038920/blank-profile-picture-973460_1280_tey6qw.png", class: "avatar-large mr-3"%>
            <% end %>
            <%= review.user.first_name %> <%= review.user.last_name %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="desk-location">
    <h3>Location</h3>
      <div class="column"
        id="map"
        style="width: 100%;
        height: 60vh;
        position: sticky;
        top: 0;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
      ></div>
  </div>
  </div>
  <% if @desk.user != current_user %>
      <%= simple_form_for [@desk, @booking] do |f| %>
      <div class="search-bar-show d-flex justify-content-between">
        <%= f.input :date, as: :string, label: false, required: true, input_html: { class: "datepicker" }, placeholder: "19 Jan" %>
        <div class="timeslots">
          <%= f.input :am, label: "AM", input_html: { class: "hidden" }, label_html: { class: "timeslot active"}, required: false %>
        </div>
        <div class="timeslots">
          <%= f.input :pm, input_html: { class: "hidden" }, label: "PM", label_html: { class: "timeslot active"}, required: false %>
        </div>
        <%= f.button :submit, class: "btn-main-smaller", value: "Book | #{@desk.price} €" %>
      <% end %>
      </div>
  <% end %>
</div>

